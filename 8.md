# 类2

## 魔术方法

我们继续讨论类的另一个概念--魔术方法。在[类1](https://github.com/im-iron-man/python-gramma/blob/master/7.md)中，我们见到了python最基本的魔术方法：\_\_init\_\_，其作用是初始化类（即实例化类）。除此以外，python还有许多其他的魔术方法，具体可参见[Python魔术方法指南](http://pycoders-weekly-chinese.readthedocs.io/en/latest/issue6/a-guide-to-pythons-magic-methods.html)。

下面是有关魔术方法的一些基本概念：

- 魔术方法是python内置的；
- 大部分魔术方法以两个下划线开头，以两个下划线结尾；
- 在python2中，next方法不要下划线；在python3中，__next__方法要下划线；
- 在类中实现一个魔术方法，或者一系列魔术方法将会收到奇效。

## \_\_str\_\_, \_\_repr\_\_

首先，介绍一下两者的作用和用法：

- \_\_str\_\_：强调对象代表的东西，在交互式中使用`>>> print 对象`，会自动调用str(对象)；
- \_\_repr\_\_：强调对象本身，在交互式中使用`>>> 对象`，会自动调用repr(对象)。

比如，使用python标准库中的data：

```
>>> from datetime import date
>>> d = date(2017, 10, 3)
>>> print d
2017-10-03
>>> str(d)
'2017-10-03'
>>> d
datetime.date(2017, 10, 3)
>>> repr(d)
'datetime.date(2017, 10, 3)'
```

其次，我们自己写一个实现了这两个魔术方法的类：

```python
class Add(object):

    def __init__(self, i, j):
        self.i = i
        self.j = j
    
    def __str__(self):
        return str(self.i + self.j)
    
    def __repr__(self):
        return '{i} + {j}'.format(i=self.i, j=self.j)
	
a = Add(1, 2)
print str(a)
print repr(a)
```

## \_\_len\_\_, \_\_nonzero\_\_

## 容器

## 运算符重载

## 可调用对象