# 函数

## 思想

整数，字符串，列表为python中的内置类型，他们都可以进行加法运算：`1 + 2`，`'12' + '34'`，`[1, 2] + [3, 4]`。这些操作均可由函数替代：

```python
from operator import add

print add(1, 2)
print add('12', '34')
print add([1, 2], [3, 4])
```

函数世界中的程序往往是这样的：

```
      函数          函数         函数
数据 ------> 数据 -------> 数据 ------> ...
```

这种思想被称为面向过程编程，即函数不断的去作用数据，得到最终的结果。面向过程的编程范式强调的是函数，即操作本身。

## 函数作为参数

首先定义两个函数：第一个实现了列表的平方和，第二个实现了列表的立方和。

```python
def sum_sqaure(x):
    s = 0
    for _ in x:
        s += _**2
    return s

def sum_cube(x):
    s = 0
    for _ in x:
        s += _**3
    return s

print sum_sqaure([1, 2, 3])
print sum_cube([1, 2, 3])
```

但是编程的世界里有一个原则：DRY（don't repeat yourserlf），就是说一切复制粘贴的代码都是多余的，而这些重复的体力劳动均可为更高级的抽象所替代，以此增加代码的可复用性。下面就使用函数作为参数来抽象上述过程：

```python
def square(x):
    return x**2

def cube(x):
    return x**3

def sum(f, x):
    s = 0
    for _ in x:
        s += f(_)
    return s
	
print sum(square, [1, 2, 3])
print sum(cube, [1, 2, 3])
```

除了上述定义的以函数作为参数的函数外，python还有三个常用的类似的函数：

```python
def square(x):
    return x**2

def is_even(x):
    return x % 2 == 0

def add(x, y):
    return x + y

print map(square, [1, 2, 3])
print filter(is_even, [1, 2, 3])
print reduce(add, [1, 2, 3])
```

通过上述潇洒的操作，可以重新定义sum函数：

```python
def sum(f, x):
    from operator import add
    return reduce(add, map(f, x))
```

## 函数作为返回值

python中函数除了可以作为参数外，还可以作为返回值。比如下面这个函数定义了函数的复合运算：

```python
def minus(x):
	return x-1

def square(x):
    return x**2

def compose(f, g):
    def h(x):
        return g(f(x))
    return h
	
h = compose(minus, square)
print h(3, 4)
```

函数式编程中有一个重要的概念叫做柯里化，他的作用是将一个二元函数变成一个一元函数：

```python
def curry(f):
    def g(x):
        def h(y):
            return f(x, y)
        return h
    return g

def uncurry(g):
    def f(x, y):
        return g(x)(y)
    return f
	
def add(x, y):
	return x + y

g = curry(add)
h = g(3)
print h(4)
```

## 闭包

```python
def add(x):
    def f(y):
        return x+y
    return f
    
f = add(3)
print f(4)
```

## 装饰器

```python
def curry(f):
    def g(x):
        def h(y):
            return f(x, y)
        return h
    return g

@curry
def add(x, y):
    return x+y
    
f = add(3)
print f(4)
```

## 匿名函数

## 传递

## 作用域

## 习题